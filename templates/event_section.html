{% extends "event_base.html" %}
{% from "_media.html" import media_url %}
{% block event_content %}

<div class="section-card">

  <h2 class="accent" style="margin-top:0;">{{ section.title }}</h2>

  {% if section.image %}
    <img class="section-image"
         src="{{ media_url(section.image) }}"
         alt="{{ section.title }}">
  {% endif %}

  {% if section.content %}
    <div class="section-text">
      {{ section.content|safe }}
    </div>
  {% else %}
    <p class="muted">No content yet.</p>
  {% endif %}

</div>

{% if is_admin %}
  <div class="section-card" style="margin-top:16px;">
    <h3 class="accent" style="margin-top:0;">Admin / Owner Controls</h3>

    <form method="POST"
          enctype="multipart/form-data"
          action="{{ url_for('upload_section_image', slug=event.slug, section_key=section_key) }}"
          class="admin-box">
      <div class="admin-row">
        <label class="mini-label">Upload image for this section</label>
        <input class="mini-file" type="file" name="image" required>
        <button class="btn mini-btn" type="submit">Upload</button>
      </div>
    </form>

    <form method="POST"
          action="{{ url_for('toggle_section', slug=event.slug, section_key=section_key) }}"
          class="admin-box">
      <button class="btn btn-outline" type="submit">
        {% if section.visible %}Hide Section{% else %}Show Section{% endif %}
      </button>
    </form>
  </div>
{% endif %}

{% endblock %}
