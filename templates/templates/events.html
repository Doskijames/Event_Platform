{% extends "base.html" %}
{% block content %}

<div class="container">
  <div class="page-head">
    <h1>Events</h1>
    <p class="muted">Browse available events. Log in and enter the passcode to access an event.</p>

    {% if user %}
      <div class="actions-row">
        <a class="btn" href="{{ url_for('create_event') }}">+ Create Event</a>
      </div>
    {% endif %}
  </div>

  <div class="events-grid">

    {% if user %}
      <a class="event-card create-card" href="{{ url_for('create_event') }}">
        <div class="event-cover create-cover">
          <div class="create-plus">+</div>
        </div>
        <div class="event-card-body">
          <div class="event-card-header">
            <h3 class="event-title">Create a New Event</h3>
            <span class="event-pill">NEW</span>
          </div>
          <div class="event-meta">
            <span class="muted">Start your own event container</span>
          </div>
          <div class="event-cta">Click to create →</div>
        </div>
      </a>
    {% endif %}

    {% for e in events %}
      <a class="event-card" href="{{ url_for('event_gate', slug=e.slug) }}">
        <div class="event-cover">
          {% if e.cover_image %}
            <img src="{{ media_url(e.cover_image) }}" alt="Event cover">
          {% else %}
            <div class="event-cover-placeholder">No Cover Photo</div>
          {% endif %}
        </div>

        <div class="event-card-body">
          <div class="event-card-header">
            <h3 class="event-title">{{ e.name }}</h3>
            <span class="event-pill">LOCKED</span>
          </div>

          <div class="event-meta">
            <span>{{ e.date_iso }}</span>
            <span class="dot">•</span>
            <span>{{ e.location }}</span>
          </div>

          <div class="event-description muted">
            {{ e.description }}
          </div>

          <div class="event-cta">Open event →</div>
        </div>
      </a>
    {% endfor %}

  </div>
</div>

{% endblock %}
