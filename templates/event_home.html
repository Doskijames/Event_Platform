{% extends "event_base.html" %}
{% from "_media.html" import media_url %}

{% block event_content %}

<div class="section-card" style="padding:0; overflow:hidden;">
  <div style="background:#0b0b0b;">
    {% if section and section.image %}
      <img src="{{ media_url(section.image) }}"
           alt="Event image"
           style="width:100%; height:420px; object-fit:contain; display:block; background:#0b0b0b;">
    {% elif event and event.cover_image %}
      <img src="{{ media_url(event.cover_image) }}"
           alt="Event cover image"
           style="width:100%; height:420px; object-fit:contain; display:block; background:#0b0b0b;">
    {% else %}
      <div style="height:420px; display:flex; align-items:center; justify-content:center; color:var(--muted); font-weight:900;">
        Event Photo
      </div>
    {% endif %}
  </div>

  <div style="padding:18px;">
    <h2 style="margin:0 0 10px; color:var(--accent);">{{ event.name }}</h2>
    {% if event.date_iso or event.location %}
      <div class="muted" style="font-weight:800; margin-bottom:12px;">
        {% if event.date_iso %}<span>{{ event.date_iso }}</span>{% endif %}
        {% if event.location %}<span style="margin-left:10px;">{{ event.location }}</span>{% endif %}
      </div>
    {% endif %}

    {% if section and (section.content or section.draft_content) %}
      <div class="ql-editor story-public" style="padding:0;">
        {{ (section.draft_content if (draft_preview and can_manage) else section.content)|safe }}
      </div>
    {% endif %}
  </div>
</div>

{% endblock %}
