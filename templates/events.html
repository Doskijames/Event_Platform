{% extends "base.html" %}
{% from "_media.html" import media_url %}

{% block content %}
<div class="page-wrap">
  <div style="display:flex; align-items:center; justify-content:space-between; gap:12px; flex-wrap:wrap;">
    <h1 style="margin:0;">Events</h1>
    {% if user %}
      <div class="muted" style="font-weight:700;">Signed in as {{ user.email }}</div>
    {% endif %}
  </div>

  {% if not events or events|length == 0 %}
    <div class="card" style="margin-top:16px;">
      <div class="muted" style="font-weight:800;">No events yet.</div>
    </div>
  {% else %}
    <div class="events-grid" style="margin-top:16px; display:grid; grid-template-columns: repeat(auto-fit, minmax(260px, 1fr)); gap:14px;">
      {% for event in events %}
        <a href="{{ url_for('event_gate', slug=event.slug) }}"
           style="text-decoration:none; color:inherit;">
          <div class="card" style="overflow:hidden;">
            <div style="background:#0b0b0b; height:200px; display:flex; align-items:center; justify-content:center;">
              {% if event.cover_image %}
                <img src="{{ media_url(event.cover_image) }}"
                     alt="Event hero image"
                     style="width:100%; height:100%; object-fit:contain; display:block; background:#0b0b0b;">
              {% else %}
                <div class="muted" style="font-weight:900;">No cover image</div>
              {% endif %}
            </div>

            <div style="padding:14px;">
              <div style="font-weight:900; font-size:1.05rem;">{{ event.name }}</div>
              <div class="muted" style="margin-top:6px;">
                <div><strong>Date:</strong> {{ event.date_iso }}</div>
                <div><strong>Location:</strong> {{ event.location }}</div>
              </div>
            </div>
          </div>
        </a>
      {% endfor %}
    </div>
  {% endif %}
</div>
{% endblock %}
